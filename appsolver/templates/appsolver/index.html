{% extends "appsolver/base.html" %}
{% load static %}

{% block title %}
Wordle-Solve
{% endblock %}

{% block body %}

<div class='container row col-12'>
    <div class='col-12 col-sm-6'>
        {% include 'appsolver/board.html' %}  
    </div>

    <div id="guessform" class="col-12 col-sm-6">
        <form id='gword' action="{% url 'index' %}" method="post">
            {% csrf_token %}
            <div class="form-group">
                <input autocomplete="off" autofocus class="form-control" 
                    name="guessword" id='guessword' placeholder="Your Guess" type="text">
            </div>
            <button class="btn btn-primary" type="submit">Submit</button>
        </form>
    </div>

</div>

<div id='wordform' class='row justify-content-center'>

    <div class='col-12 col-sm-6'>

        {% if nowords %}
            <h2>Sorry - the game is ended because no dictionary words satisfy your response</h2>
        {% else %}
            <h2>Top suggested guesses:</h2>
            <ul>
                {% for word in topwords %}
                    <li>
                        <p id='{{ word }}' onclick='guess_word("{{ word }}")'> {{ word }}</p>
                    </li>
                {% endfor %}
                <form id='dword' action="{% url 'guess' %}" method="post">
                    {% csrf_token %}
                    <div class="form-group">
                        <input autocomplete="off" autofocus class="form-control" hidden
                        name="delword" id='delword' type="text">
                        <p><button aria-label='delete item' class='btn btn-sm' type='submit'>X</button>
                            Delete a word Wordle doesn't recognize</p>
                    </div>
                </form>
            </ul>

        {% endif %}
    </div>

</div>

<script>

    function guess_word(word) {
        let box = document.querySelector('#guessword');
        let box2 = document.querySelector('#delword');
        box.setAttribute('value', word);
        box2.setAttribute('value', word);
        let allwords = document.querySelectorAll('li p');
        allwords.forEach((thisValue) => {
            thisValue.removeAttribute('class')
        });
        let theword = document.querySelector('#' + word)
        theword.setAttribute('class', 'text-light bg-dark');        
    }

</script>

{% endblock %}